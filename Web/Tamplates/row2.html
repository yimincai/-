{% extends 'base.html' %}
{% load static %}

{% block navbar %}
 <li class="nav-item">
                        <a class="nav-link text-light" href="camera">Camera</i></a>
                    </li>   
                     <li class="nav-item">
                        <a class="nav-link text-light" href="row1">Row1</i></a>
                    </li>   
                     <li class="nav-item">
                        <a class="nav-link text-primary" href="row2">Row2</i></a>
                    </li> 
                     <li class="nav-item">
                        <a class="nav-link text-light" href="temperature">Temperature</i></a>
                    </li> 
                     <li class="nav-item">
                        <a class="nav-link text-light" href="airdust">Air Dust Particals</i></a>
                    </li> 
                       <li class="nav-item">
                        <a class="nav-link text-light" href="controlmotor">Control Motor</i></a>
                    </li> 
                    <li class="nav-item">
                        <a class="nav-link text-light" href="history">History</i></a>
                    </li>  
                  
                    <li class="nav-item">
                        <a class="nav-link text-light" href="logout">Logout</i></a>
                    </li>  

{% endblock navbar %}
  {% block content %}
        
<div class="container" style="height:300px; width:auto;">
   <div class="shadow  "id="ESP31" style="height:320px; width:auto">
      
   </div>  
  <div class="shadow  "id="ESP32" style="height:320px; width:auto;">
      
   </div>     
   <div class="shadow  "id="ESP41" style="height:320px; width:auto;">
      
   </div>    
   <div class="shadow  "id="ESP42" style="height:320px; width:auto;">
      
   </div>   
</div>
<script src="{% static 'jQuery.js' %}"></script>
<script src="{% static 'echarts.js' %}"></script>        
     
<script >
    var endpoint = 'temp';
    var s1 = 0;
    var esp31= document.getElementById('ESP31');
    var myChart = echarts.init(esp31);
    function reload(){
            $.ajax({
            type: "GET",
            url: endpoint,
            

            success: function (data) 
            {         
            s1=data.block_3.esp31.SoilMoistureSensor.value;
                option = {
                tooltip: {
                formatter: '{a} <br/>{b} : {c}%'
                },
                series: [
                        {
                            name: "ESP31",
                            type: 'gauge',
                            detail: {formatter: '{value}%'},
        
                            data: [{value:s1, name: 'ESP31'}]
                        }
                    ]
                };                      
                setInterval(function () {
                    option.series[0].data[0].value = s1;
                    myChart.setOption(option, false);
                },100);
                if (option && typeof option === "object") {
                    myChart.setOption(option,false);
                }
            }
         });q   q1
    }
    reload()
</script>
<script >
    var endpoint = 'temp';
    var s2 = 0;
    var esp32= document.getElementById('ESP32');
    var myChart2 = echarts.init(esp32);
    function reload2(){
            $.ajax({
            type: "GET",
            url: endpoint,
            

            success: function (data) 
            {         
             s2=data.block_3.esp32.SoilMoistureSensor.value;
                option2 = {
                tooltip: {
                formatter: '{a} <br/>{b} : {c}%'
                },
                series: [
                        {
                            name: "ESP32",
                            type: 'gauge',
                            detail: {formatter: '{value}%'},
        
                            data: [{value:s2, name: 'ESP32'}]
                        }
                    ]
                };                      
                setInterval(function () {
                    option2.series[0].data[0].value = s2;
                    myChart2.setOption(option2, false);
                },100);
                if (option2 && typeof option2 === "object") {
                    myChart2.setOption(option2,false);
                }
            }
         });
    }
    reload2()
</script>
<script >
    var endpoint = 'temp';
    var s3 = 0;
    var esp41= document.getElementById('ESP41');
    var myChart3 = echarts.init(esp41);
    function reload3(){
            $.ajax({
            type: "GET",
            url: endpoint,
            

            success: function (data) 
            {         
            s3=data.block_4.esp41.SoilMoistureSensor.value;
                option3 = {
                tooltip: {
                formatter: '{a} <br/>{b} : {c}%'
                },
                series: [
                        {
                            name: "ESP41",
                            type: 'gauge',
                            detail: {formatter: '{value}%'},
        
                            data: [{value:s3, name: 'ESP41'}]
                        }
                    ]
                };                      
                setInterval(function () {
                    option3.series[0].data[0].value = s3;
                    myChart3.setOption(option3, false);
                },100);
                if (option3 && typeof option3 === "object") {
                    myChart3.setOption(option3,false);
                }
            }
         });
    }
    reload3()
</script>
<script >
    var endpoint = 'temp';
    var s4 = 0;
    var esp42= document.getElementById('ESP42');
    var myChart4 = echarts.init(esp42);
    function reload4(){
            $.ajax({
            type: "GET",
            url: endpoint,
            

            success: function (data) 
            {         
             s4=data.block_4.esp42.SoilMoistureSensor.value;
                option4 = {
                tooltip: {
                formatter: '{a} <br/>{b} : {c}%'
                },
                series: [
                        {
                            name: "ESP42",
                            type: 'gauge',
                            detail: {formatter: '{value}%'},
        
                            data: [{value:s2, name: 'ESP42'}]
                        }
                    ]
                };                      
                setInterval(function () {
                    option4.series[0].data[0].value = s4;
                    myChart4.setOption(option4, false);
                },100);
                if (option4 && typeof option4 === "object") {
                    myChart4.setOption(option4,false);
                }
            }
         });
    }
    reload4()
</script>
  {% endblock content %}
                     
                                    

  
     
  
               
  